<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">

	<changeSet id="2023-08-08-00-14" author="ruhanga">
		<comment>
			Modify obs concepts to point to correct concept ids for 'Gonorrhea (Swab)', 'Bacteria (Swab)' and 'Chlamydia (Swab)'
		</comment>
		<sql>
			SET SQL_SAFE_UPDATES = 0;

			-- Bacteria (Swab)
			SET @concept_id := (SELECT concept_id from concept where uuid="ccd660c7-41c7-4143-8156-cfb820ed48c3" limit 1);
			select @concept_id;
			UPDATE obs SET concept_id = @concept_id where form_namespace_and_path like "Bahmni^Laboratory.1/131-0";

			-- Gonorrhea (Swab)
			SET @concept_id := (SELECT concept_id from concept where uuid="6a57ad22-e890-497f-913e-648966578ade" limit 1);
			select @concept_id;
			UPDATE obs SET concept_id = @concept_id where form_namespace_and_path like "Bahmni^Laboratory.1/126-0";

			-- Chlamydia (Swab)
			SET @concept_id := (SELECT concept_id from concept where uuid="dd00612e-519b-40c2-bb34-31e00b9c93f5" limit 1);
			select @concept_id;
			UPDATE obs SET concept_id = @concept_id where form_namespace_and_path like "Bahmni^Laboratory.1/24-0";

			SET SQL_SAFE_UPDATES = 1;
		</sql>
	</changeSet>
</databaseChangeLog>
